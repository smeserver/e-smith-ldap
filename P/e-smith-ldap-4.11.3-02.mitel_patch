Index: e-smith-ldap/e-smith-ldap.spec
diff -u e-smith-ldap/root/etc/e-smith/events/actions/ldap-rebuild:1.4 e-smith-ldap/root/etc/e-smith/events/actions/ldap-rebuild:1.5
--- e-smith-ldap/root/etc/e-smith/events/actions/ldap-rebuild:1.4	Tue Sep 10 15:06:06 2002
+++ e-smith-ldap/root/etc/e-smith/events/actions/ldap-rebuild	Tue Nov 22 06:33:17 2005
@@ -101,7 +101,7 @@
 
 	    print LDAP "\n";
 	    print LDAP "dn: uid=$key,$ldapBase\n";
-	    print LDAP "objectClass: group\n";
+	    print LDAP "objectClass: posixGroup\n";
 	    print LDAP "uid: " . $key . "\n";
 	    print LDAP "cn: $desc\n" unless $desc =~ /^\s*$/;
 	    print LDAP "mail: $key\@$domain\n";
Index: e-smith-ldap/root/etc/e-smith/events/actions/ldap-update
diff -u e-smith-ldap/root/etc/e-smith/events/actions/ldap-update:1.9 e-smith-ldap/root/etc/e-smith/events/actions/ldap-update:1.10
--- e-smith-ldap/root/etc/e-smith/events/actions/ldap-update:1.9	Fri Apr 15 15:32:13 2005
+++ e-smith-ldap/root/etc/e-smith/events/actions/ldap-update	Tue Nov 22 06:33:17 2005
@@ -123,7 +123,7 @@
     }
     elsif ($type eq 'group')
     {
-	push @attrs, (objectClass => 'group');
+	push @attrs, (objectClass => 'posixGroup');
 	push @attrs, (uid => $key);
 
 	my $key = $acct->key;
Index: e-smith-ldap/root/var/service/ldap/run
diff -u e-smith-ldap/root/var/service/ldap/run:1.2 e-smith-ldap/root/var/service/ldap/run:1.3
--- e-smith-ldap/root/var/service/ldap/run:1.2	Wed Mar 23 12:36:25 2005
+++ e-smith-ldap/root/var/service/ldap/run	Tue Nov 22 06:33:17 2005
@@ -14,7 +14,8 @@
 # Prime directory if required
 if [ \! -f /var/lib/ldap/nextid.dbb -a -f $ldif ]
 then
-    setuidgid ldap slapadd -c < $ldif
+    sed 's/objectClass: group/objectClass: posixGroup/' < $ldif | \
+      setuidgid ldap slapadd -c
 fi
 
 # Now run daemon
